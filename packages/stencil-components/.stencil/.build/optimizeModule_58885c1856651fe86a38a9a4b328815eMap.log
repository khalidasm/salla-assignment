{"version":3,"names":["couponInputCss","CouponInput","constructor","hostRef","this","placeholder","value","disabled","required","name","isLoading","inputValue","loading","handleNativeInput","event","input","target","newValue","console","log","updateFormValue","inputChange","emit","handleApply","preventDefault","applyCouponLoading","applyCoupon","setTimeout","handleInput","inputElement","connectedCallback","el","attachInternals","internals","componentWillLoad","handleValueChange","setFormValue","render","h","class","height","width","ref","type","maxLength","minLength","pattern","onInput","variant","onClick","isDisabled"],"sources":["src/components/coupon-input/coupon-input.css?tag=coupon-input&encapsulation=shadow","src/components/coupon-input/coupon-input.tsx"],"sourcesContent":[":host{\n    display: block;\n}","// src/components/coupon-input/coupon-input.tsx\nimport { Component, h, Prop, Event, EventEmitter, Watch, State, Element, Listen } from \"@stencil/core\";\n\n@Component({\n  tag: \"coupon-input\",\n  styleUrl: \"./coupon-input.css\",\n  shadow: true,\n  formAssociated: true\n})\nexport class CouponInput {\n  @Element() el!: HTMLElement;\n\n  @Prop() placeholder: string = \"Insert code\";\n  @Prop({ mutable: true, reflect: true }) value: string = \"\";\n  @Prop({ reflect: true }) disabled: boolean = false;\n  @Prop() required: boolean = false;\n  @Prop() name: string = \"coupon\";\n  @Prop() maxLength: number;\n  @Prop() minLength: number;\n  @Prop() pattern: string;\n  @Prop() isLoading: boolean = false;\n\n  @State() private inputValue: string = \"\";\n  @State() private loading: boolean = false;\n  \n  private inputElement: HTMLInputElement;\n  private internals: ElementInternals;\n\n  @Event({ eventName: 'inputChange' }) inputChange: EventEmitter<string>;\n  @Event({ eventName: 'applyCoupon' }) applyCoupon: EventEmitter<string>;\n  @Event() applyCouponLoading: EventEmitter<boolean>;\n\n  @Listen('input', { target: 'document' })\n  handleInput(event: Event) {\n    if (this.disabled) return;\n    \n    const input = event.target as HTMLInputElement;\n    if (input !== this.inputElement) return;\n    \n    const newValue = input.value;\n    console.log('Input event in Stencil:', newValue);\n    this.inputValue = newValue;\n    this.value = newValue; \n    this.updateFormValue();\n    this.inputChange.emit(newValue);\n  }\n\n  private handleNativeInput = (event: Event) => {\n    if (this.disabled) return;\n    \n    const input = event.target as HTMLInputElement;\n    const newValue = input.value;\n    console.log('Native input event:', newValue);\n    this.inputValue = newValue;\n    this.value = newValue; \n    this.updateFormValue();\n    this.inputChange.emit(newValue);\n  };\n\n  connectedCallback() {\n    console.log('CouponInput component connected');\n    if (this.el.attachInternals) {\n      // Only create internals if browser supports it\n      this.internals = this.el.attachInternals();\n      this.inputValue = this.value;\n      this.updateFormValue();\n    }\n  }\n\n  componentWillLoad() {\n    // Initialize input value with the prop value\n    this.inputValue = this.value;\n  }\n\n  @Watch('value')\n  handleValueChange(newValue: string) {\n    console.log('Value changed in Stencil:', newValue);\n    if (this.inputValue !== newValue) {\n      this.inputValue = newValue;\n      if (this.inputElement && this.inputElement.value !== newValue) {\n        this.inputElement.value = newValue;\n      }\n      this.updateFormValue();\n    }\n  }\n\n  private updateFormValue() {\n    if (this.internals) {\n      this.internals.setFormValue(this.inputValue);\n    }\n  }\n\n  private handleApply = (event: Event) => {\n    event.preventDefault();\n    if (!this.inputValue || this.disabled) return;\n    \n    this.loading = true;\n    this.applyCouponLoading.emit(true);\n    this.applyCoupon.emit(this.inputValue);\n    \n    setTimeout(() => {\n      this.loading = false;\n      this.applyCouponLoading.emit(false);\n    }, 500);\n  };\n\n  render() {\n    if(this.isLoading) {\n      return <div class=\"flex justify-between items-center\">\n        <div class=\"w-[40%]\">\n          <shimmer-component height=\"10px\" width=\"100%\"></shimmer-component>\n        </div>\n        <div class=\"w-[15%]\">\n          <shimmer-component height=\"10px\" width=\"100%\"></shimmer-component>\n        </div>\n      </div>\n    }\n    \n    return (\n      <div class=\"flex items-center justify-between\">\n        <div>\n          <span class=\"text-[12px] text-black font-bold\">Have a coupon?</span>\n        </div>\n        <div class=\"flex gap-2 w-fit bg-bg/50 p-[4px] !border !border-bg rounded-[6px]\">\n          <input\n            ref={(el) => this.inputElement = el}\n            type=\"text\"\n            class=\"flex-1 w-[60px] text-[10px] text-primary placeholder:text-label-gray focus:outline-none disabled:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-70\"\n            placeholder={this.placeholder}\n            value={this.inputValue}\n            disabled={this.disabled}\n            required={this.required}\n            name={this.name}\n            maxLength={this.maxLength}\n            minLength={this.minLength}\n            pattern={this.pattern}\n            onInput={this.handleNativeInput}\n          />\n          <button-component\n            variant=\"sm\"\n            class=\"text-[10px]\"\n            isLoading={this.loading}\n            onClick={this.handleApply}\n            isDisabled={this.disabled}\n          >\n            Apply\n          </button-component>\n        </div>\n      </div>\n    );\n  }\n}"],"mappings":"yDAAA,MAAMA,EAAiB,2hW,MCSVC,EAAW,MANxB,WAAAC,CAAAC,G,6IASUC,KAAWC,YAAW,cACUD,KAAKE,MAAW,GAC/BF,KAAQG,SAAY,MACrCH,KAAQI,SAAY,MACpBJ,KAAIK,KAAW,SAIfL,KAASM,UAAY,MAEZN,KAAUO,WAAW,GACrBP,KAAOQ,QAAY,MAwB5BR,KAAAS,kBAAqBC,IAC3B,GAAIV,KAAKG,SAAU,OAEnB,MAAMQ,EAAQD,EAAME,OACpB,MAAMC,EAAWF,EAAMT,MACvBY,QAAQC,IAAI,sBAAuBF,GACnCb,KAAKO,WAAaM,EAClBb,KAAKE,MAAQW,EACbb,KAAKgB,kBACLhB,KAAKiB,YAAYC,KAAKL,EAAS,EAoCzBb,KAAAmB,YAAeT,IACrBA,EAAMU,iBACN,IAAKpB,KAAKO,YAAcP,KAAKG,SAAU,OAEvCH,KAAKQ,QAAU,KACfR,KAAKqB,mBAAmBH,KAAK,MAC7BlB,KAAKsB,YAAYJ,KAAKlB,KAAKO,YAE3BgB,YAAW,KACTvB,KAAKQ,QAAU,MACfR,KAAKqB,mBAAmBH,KAAK,MAAM,GAClC,IAAI,CAgDV,CAtHC,WAAAM,CAAYd,GACV,GAAIV,KAAKG,SAAU,OAEnB,MAAMQ,EAAQD,EAAME,OACpB,GAAID,IAAUX,KAAKyB,aAAc,OAEjC,MAAMZ,EAAWF,EAAMT,MACvBY,QAAQC,IAAI,0BAA2BF,GACvCb,KAAKO,WAAaM,EAClBb,KAAKE,MAAQW,EACbb,KAAKgB,kBACLhB,KAAKiB,YAAYC,KAAKL,E,CAexB,iBAAAa,GACEZ,QAAQC,IAAI,mCACZ,GAAIf,KAAK2B,GAAGC,gBAAiB,CAE3B5B,KAAK6B,UAAY7B,KAAK2B,GAAGC,kBACzB5B,KAAKO,WAAaP,KAAKE,MACvBF,KAAKgB,iB,EAIT,iBAAAc,GAEE9B,KAAKO,WAAaP,KAAKE,K,CAIzB,iBAAA6B,CAAkBlB,GAChBC,QAAQC,IAAI,4BAA6BF,GACzC,GAAIb,KAAKO,aAAeM,EAAU,CAChCb,KAAKO,WAAaM,EAClB,GAAIb,KAAKyB,cAAgBzB,KAAKyB,aAAavB,QAAUW,EAAU,CAC7Db,KAAKyB,aAAavB,MAAQW,C,CAE5Bb,KAAKgB,iB,EAID,eAAAA,GACN,GAAIhB,KAAK6B,UAAW,CAClB7B,KAAK6B,UAAUG,aAAahC,KAAKO,W,EAkBrC,MAAA0B,GACE,GAAGjC,KAAKM,UAAW,CACjB,OAAO4B,EAAA,OAAKC,MAAM,qCAChBD,EAAK,OAAAC,MAAM,WACTD,EAAmB,qBAAAE,OAAO,OAAOC,MAAM,UAEzCH,EAAK,OAAAC,MAAM,WACTD,EAAmB,qBAAAE,OAAO,OAAOC,MAAM,U,CAK7C,OACEH,EAAA,OAAKC,MAAM,qCACTD,EAAA,WACEA,EAAA,QAAMC,MAAM,oCAAkC,mBAEhDD,EAAK,OAAAC,MAAM,sEACTD,EAAA,SACEI,IAAMX,GAAO3B,KAAKyB,aAAeE,EACjCY,KAAK,OACLJ,MAAM,8JACNlC,YAAaD,KAAKC,YAClBC,MAAOF,KAAKO,WACZJ,SAAUH,KAAKG,SACfC,SAAUJ,KAAKI,SACfC,KAAML,KAAKK,KACXmC,UAAWxC,KAAKwC,UAChBC,UAAWzC,KAAKyC,UAChBC,QAAS1C,KAAK0C,QACdC,QAAS3C,KAAKS,oBAEhByB,EAAA,oBACEU,QAAQ,KACRT,MAAM,cACN7B,UAAWN,KAAKQ,QAChBqC,QAAS7C,KAAKmB,YACd2B,WAAY9C,KAAKG,UAAQ,U","ignoreList":[]}